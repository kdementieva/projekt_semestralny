{% extends "base.html" %}

{% block content %}
<h2 class="mb-3">Administrator – sale</h2>

<a href="{% url 'admin_room_create' %}" class="btn btn-success btn-sm mb-3">
  + Dodaj salę
</a>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <table class="table table-striped table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>Nazwa</th>
          <th>Cena</th>
          <th class="text-end">Akcje</th>
        </tr>
      </thead>
      <tbody>
        {% for room in rooms %}
        <tr>
          <td>{{ room.name }}</td>
          <td>{{ room.price }} PLN</td>
          <td class="text-end">
            <a href="{% url 'admin_room_edit' room.id %}"
               class="btn btn-sm btn-warning">
              Edytuj
            </a>

            <form method="post"
                  action="{% url 'admin_room_delete' room.id %}"
                  class="d-inline"
                  onsubmit="return confirmDelete('{{ room.name }}');">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger">
                Usuń
              </button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="text-center text-muted">
            Brak sal do wyświetlenia.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
function confirmDelete(roomName) {
  return confirm(
    'Czy na pewno chcesz usunąć salę "' + roomName + '"?'
  );
}
</script>

{% endblock %}
