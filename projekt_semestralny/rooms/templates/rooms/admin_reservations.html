{% extends "base.html" %}

{% block title %}Panel administratora{% endblock %}

{% block content %}
<h2 class="mb-3">Administrator – rezerwacje</h2>

<div class="d-flex gap-2 mb-3">
  <a href="/rooms/admin-panel/dashboard/" class="btn btn-outline-info btn-sm">
    Dashboard
  </a>
  <a href="/rooms/admin-panel/rooms/" class="btn btn-outline-dark btn-sm">
    Zarządzanie salami
  </a>
</div>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <table class="table table-bordered table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>Użytkownik</th>
          <th>Sala</th>
          <th>Od</th>
          <th>Do</th>
          <th>Status</th>
          <th class="text-end">Akcje</th>
        </tr>
      </thead>
      <tbody>
        {% for r in reservations %}
        <tr>
          <td>{{ r.user.username }}</td>
          <td>{{ r.room.name }}</td>
          <td>{{ r.reservation_time_start }}</td>
          <td>{{ r.reservation_time_end }}</td>
          <td>
            {% if r.status == 'pending' %}
              <span class="badge bg-warning">Oczekująca</span>
            {% elif r.status == 'approved' %}
              <span class="badge bg-success">Zatwierdzona</span>
            {% else %}
              <span class="badge bg-danger">Anulowana</span>
            {% endif %}
          </td>
          <td class="text-end">
            {% if r.status == 'pending' %}
              <a href="{% url 'approve_reservation' r.id %}"
                 class="btn btn-sm btn-success">
                Zatwierdź
              </a>
              <a href="{% url 'reject_reservation' r.id %}"
                 class="btn btn-sm btn-danger">
                Odrzuć
              </a>
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-muted">
            Brak rezerwacji do wyświetlenia.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
